"use strict";(self.webpackChunkmovie_db=self.webpackChunkmovie_db||[]).push([[317],{4317:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var s=a(2791),r=a(1087),n=a(4390),i=a(6438),o=a(3713),l=a(3984),c=a(5391),d=a(5527),x=a(3400),h=a(5403),u=a(697),p=a(890),m=a(7621),v=a(9504),j=a(2169),y=a(6647),g=a(4294),f=a(4245),Z=a(9626),b=a(184);const P=function(){const{state:e,dispatch:t}=(0,s.useContext)(i.I),[a,P]=(0,s.useState)(e.searchTerm),[R,E]=(0,s.useState)(e.currentPage),S=(0,s.useRef)(null);function C(){var i;const d=(0,o.NL)(),[x,h]=s.useState(e.currentPage||1);async function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{data:t}=await n.Z.get("/?s=".concat(a,"&page=").concat(e));return console.log(t),t}const{status:Z,data:P,error:E,isFetching:S,isPlaceholderData:C}=(0,l.a)({queryKey:["movies",x],queryFn:()=>f(x),placeholderData:c.Wk,initialPageParam:1,staleTime:5e3,enabled:!!a&&!!R});return s.useEffect((()=>{!C&&null!==P&&void 0!==P&&P.hasMore&&d.prefetchQuery({queryKey:["movies",x+1],queryFn:()=>f(x+1)})}),[P,C,x,d]),(0,b.jsxs)("div",{children:["pending"===Z?(0,b.jsx)("div",{}):"error"===Z?(0,b.jsxs)("div",{children:["Error: ",E.message]}):(0,b.jsx)("div",{children:null===(i=P.movies)||void 0===i?void 0:i.map((e=>(0,b.jsx)(m.Z,{sx:{maxWidth:"100%",my:3},children:(0,b.jsxs)(y.Z,{component:r.rU,to:"/movie/".concat(e.imdbID),sx:{display:"flex"},children:[(0,b.jsx)(j.Z,{component:"img",width:"130",image:e.Poster,alt:e.Title,sx:{width:130,height:196}}),(0,b.jsx)(u.Z,{sx:{flex:1},children:(0,b.jsxs)(v.Z,{children:[(0,b.jsx)(p.Z,{gutterBottom:!0,variant:"h5",component:"div",children:e.Title}),(0,b.jsx)(p.Z,{variant:"body2",color:"text.secondary",children:e.Year})]})})]})},e.imdbID)))}),(null===P||void 0===P?void 0:P.movies)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:["Current Page: ",x]}),(0,b.jsxs)(u.Z,{sx:{my:5,display:"flex",justifyContent:"center"},children:[(0,b.jsx)(g.Z,{variant:"contained",onClick:function(){h((e=>Math.max(e-1,0))),t({type:"SET_CURRENT_PAGE",payload:Math.max(x-1,0)})},disabled:1===x,sx:{mr:3},children:"Previous Page"})," ",(0,b.jsx)(g.Z,{variant:"contained",onClick:function(){h((e=>null!==P&&void 0!==P&&P.hasMore?e+1:e)),t({type:"SET_CURRENT_PAGE",payload:x+1})},disabled:C||!(null!==P&&void 0!==P&&P.hasMore),children:"Next Page"})]})]}),S?(0,b.jsx)("span",{children:" Loading..."}):null," "]})}return(0,b.jsxs)("div",{children:[(0,b.jsx)(u.Z,{sx:{textAlign:"center"},children:(0,b.jsx)(p.Z,{variant:"h1",gutterBottom:!0,sx:{color:Z.J.palette.text.primary},children:(0,b.jsxs)(r.rU,{to:"/",style:{color:Z.J.palette.text.primary,textDecoration:"none"},children:["M",(0,b.jsx)(p.Z,{variant:"span",sx:{color:Z.J.palette.primary.main,fontWeight:"900"},children:"oo"}),"gle"]})})}),(0,b.jsxs)(d.Z,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center"},onSubmit:e=>{e.preventDefault(),P(S.current.value),t({type:"SET_SEARCH_TERM",payload:S.current.value})},children:[(0,b.jsx)(f.ZP,{sx:{ml:1,flex:1},placeholder:"Search",inputProps:{"aria-label":"search"},name:"s",inputRef:S,type:"search"}),(0,b.jsx)(x.Z,{type:"submit",sx:{p:"10px"},"aria-label":"search",children:(0,b.jsx)(h.Z,{})})]}),(0,b.jsx)(C,{})]})}},4390:(e,t,a)=>{a.d(t,{Z:()=>r});const s=a(5294).Z.create({baseURL:"http://omdbapi.com",params:{apikey:"a94409cf"}});s.interceptors.response.use((e=>{var t;if(null!==(t=e.data)&&void 0!==t&&t.Search){const t=Math.ceil(parseInt(e.data.totalResults,10)/10)||0,a=e.config.params.page||1;return{data:{movies:e.data.Search,hasMore:t>a,totalResults:e.data.totalResults}}}return e}),(e=>Promise.reject(e)));const r=s}}]);
//# sourceMappingURL=317.b079b8a2.chunk.js.map